
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>How to use the PigeonSuperModel DataSet &#8212; Pigeon Super Model</title>
    
  <link href="_static/css/theme.css" rel="stylesheet">
  <link href="_static/css/index.ff1ffe594081f20da1ef19478df9384b.css" rel="stylesheet">

    
  <link rel="stylesheet"
    href="_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-book-theme.css?digest=c3fdc42140077d1ad13ad2f1588a4309" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="_static/js/index.be7d3bbb2ef33a8344ce.js">

    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/togglebutton.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="_static/sphinx-book-theme.d59cb220de22ca1c485ebbdc042f0030.js"></script>
    <script async="async" src="https://unpkg.com/thebe@0.5.1/lib/index.js"></script>
    <script>
        const thebe_selector = ".thebe"
        const thebe_selector_input = "pre"
        const thebe_selector_output = ".output"
    </script>
    <script async="async" src="_static/sphinx-thebe.js"></script>
    <link rel="shortcut icon" href="_static/icon.ico"/>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="_static/PigeonSuperModel.jpg" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">Pigeon Super Model</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="intro.html">
   Welcome
  </a>
 </li>
</ul>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="Tutorial.html">
   Tutorials
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference external" href="https://www.ruhr-uni-bochum.de/biopsy/members.html">
   GetInTouch
  </a>
 </li>
</ul>

    </div>
</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            
            <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
                data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
                aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
                title="Toggle navigation" data-toggle="tooltip" data-placement="left">
                <i class="fas fa-bars"></i>
                <i class="fas fa-arrow-left"></i>
                <i class="fas fa-arrow-up"></i>
            </button>
            
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="_sources/HowToPigeonSuperModelDataset.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
                onclick="printPdf(this)" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Connect with source repository"><i class="fab fa-github"></i></button>
    <div class="dropdown-buttons sourcebuttons">
        <a class="repository-button"
            href="https://gitlab.ruhr-uni-bochum.de/ikn/pigeonsupermodel"><button type="button" class="btn btn-secondary topbarbtn"
                data-toggle="tooltip" data-placement="left" title="Source repository"><i
                    class="fab fa-github"></i>repository</button></a>
        <a class="issues-button"
            href="https://gitlab.ruhr-uni-bochum.de/ikn/pigeonsupermodel/issues/new?title=Issue%20on%20page%20%2FHowToPigeonSuperModelDataset.html&body=Your%20issue%20content%20here."><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Open an issue"><i class="fas fa-lightbulb"></i>open issue</button></a>
        
    </div>
</div>

            <!-- Full screen (wrap in <a> to have style consistency -->

<a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
        data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
        title="Fullscreen mode"><i
            class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show noprint">
            
            <div class="tocsection onthispage pt-5 pb-3">
                <i class="fas fa-list"></i> Contents
            </div>
            <nav id="bd-toc-nav" aria-label="Page">
                <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#create-a-new-project">
   Create a new project
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#optional-create-3d-project-to-match-synchronous-frames">
   Optional: Create 3D project to match synchronous frames
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#extract-new-frames">
   Extract New Frames
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#optional-extract-matching-frames-in-3d-projects">
   Optional: Extract Matching Frames in 3D projects
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#label-your-own-data-first">
   Label your own Data first
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#merge-the-pigeonsupermodel-dataset">
   Merge the PigeonSuperModel DataSet
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#re-train-the-pigeonsupermodel">
   Re-Train the PigeonSuperModel
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#evaluate-your-new-pigeonsupermodel">
   Evaluate your new PigeonSuperModel
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#contribute-to-pigeonsupermodel-com">
   Contribute to PigeonSuperModel.com
  </a>
 </li>
</ul>

            </nav>
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>How to use the PigeonSuperModel DataSet</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#create-a-new-project">
   Create a new project
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#optional-create-3d-project-to-match-synchronous-frames">
   Optional: Create 3D project to match synchronous frames
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#extract-new-frames">
   Extract New Frames
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#optional-extract-matching-frames-in-3d-projects">
   Optional: Extract Matching Frames in 3D projects
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#label-your-own-data-first">
   Label your own Data first
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#merge-the-pigeonsupermodel-dataset">
   Merge the PigeonSuperModel DataSet
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#re-train-the-pigeonsupermodel">
   Re-Train the PigeonSuperModel
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#evaluate-your-new-pigeonsupermodel">
   Evaluate your new PigeonSuperModel
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#contribute-to-pigeonsupermodel-com">
   Contribute to PigeonSuperModel.com
  </a>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            
              <div>
                
  <div class="tex2jax_ignore mathjax_ignore section" id="how-to-use-the-pigeonsupermodel-dataset">
<h1>How to use the PigeonSuperModel DataSet<a class="headerlink" href="#how-to-use-the-pigeonsupermodel-dataset" title="Permalink to this headline">¶</a></h1>
<p>Download this notebook in the upper right corner as <code class="docutils literal notranslate"><span class="pre">.ipynb</span></code> file and start it from within your DeepLabCut environment. If you need to install DeepLabCut first, please check <a class="reference external" href="https://pigeonsupermodel.com/DLC_StudentGuide.html#installation">here</a>.</p>
<p>This notebook will show you how to create a pretrained project with the PigeonSuperModel and how to download and merge the pre-labeled PigeonSuperModel dataset to increase your own training data:</p>
<ul class="simple">
<li><p>Create a new PigeonSuperModel Project</p></li>
<li><p>Extract new Frames</p></li>
<li><p>Label your own Data</p></li>
<li><p>Merge PigeonSuperModel DataSet</p></li>
<li><p>Re-Train the PigeonSuperModel</p></li>
<li><p>Evaluate your new PigeonSuperModel</p></li>
<li><p>Contribute to <a class="reference external" href="http://PigeonSuperModel.com">PigeonSuperModel.com</a></p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">deeplabcut</span>
<span class="kn">from</span> <span class="nn">tkinter</span> <span class="kn">import</span> <span class="n">filedialog</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Using DeepLabCut version: </span><span class="si">{</span><span class="n">deeplabcut</span><span class="o">.</span><span class="n">__version__</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="create-a-new-project">
<h2>Create a new project<a class="headerlink" href="#create-a-new-project" title="Permalink to this headline">¶</a></h2>
<p>See Notebook before</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">video_path</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;F:\PigeonSuperModel_local\ForAnalysisVideoData\StopSignal&#39;</span>
<span class="n">video_list</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">video_path</span><span class="p">)</span>
<span class="n">projectpath</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;F:\PigeonSuperModel_local\DeepLabCutModels&#39;</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">monkeypatch</span><span class="p">():</span>
    <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    This function locates a file named &#39;pose_estimation_tensorflow/models/pretrained/pretrained_model_urls.yaml&#39; in your local DeepLabCut</span>
<span class="sd">    installation and adds the new URLs below to reach the PigeonSUperModel repository.</span>
<span class="sd">    In a last step, the names of the PigeonSuperModels are added to the &#39;modelzoo.py&#39; Modeloptions as valid model names.</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="kn">from</span> <span class="nn">deeplabcut.create_project</span> <span class="kn">import</span> <span class="n">modelzoo</span>

    <span class="c1"># locate the `pretrained_model_urls.yaml` file in your local DeepLabCut installation (hardcoded based on deeplabcut dir structure)</span>
    <span class="n">neturls_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">deeplabcut</span><span class="o">.</span><span class="n">auxiliaryfunctions</span><span class="o">.</span><span class="n">get_deeplabcut_path</span><span class="p">(),</span> <span class="s1">&#39;pose_estimation_tensorflow&#39;</span><span class="p">,</span> <span class="s1">&#39;models&#39;</span><span class="p">,</span> <span class="s1">&#39;pretrained&#39;</span><span class="p">,</span> <span class="s1">&#39;pretrained_model_urls.yaml&#39;</span><span class="p">)</span>

    <span class="n">edits</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;PigeonSuperModel_resnet_50&#39;</span><span class="p">:</span>  <span class="s1">&#39;https://gitlab.ruhr-uni-bochum.de/ikn/pigeonsupermodel/-/raw/main/models/DeepLabCut/DLC_PigeonSuperModel_01_resnet_50_iteration-2_shuffle-3.tar.gz&#39;</span><span class="p">,</span>
             <span class="s1">&#39;PigeonSuperModel_resnet_101&#39;</span><span class="p">:</span> <span class="s1">&#39;https://gitlab.ruhr-uni-bochum.de/ikn/pigeonsupermodel/-/raw/main/models/DeepLabCut/DLC_PigeonSuperModel_01_resnet_101_iteration-2_shuffle-4.tar.gz&#39;</span><span class="p">,</span> 
             <span class="s1">&#39;PigeonSuperModel_resnet_152&#39;</span><span class="p">:</span> <span class="s1">&#39;https://gitlab.ruhr-uni-bochum.de/ikn/pigeonsupermodel/-/raw/main/models/DeepLabCut/DLC_PigeonSuperModel_01_resnet_152_iteration-2_shuffle-5.tar.gz&#39;</span><span class="p">}</span>
    
    <span class="c1"># add new model to the neturls file     </span>
    <span class="n">deeplabcut</span><span class="o">.</span><span class="n">auxiliaryfunctions</span><span class="o">.</span><span class="n">edit_config</span><span class="p">(</span><span class="n">neturls_path</span><span class="p">,</span> <span class="n">edits</span><span class="p">)</span>

    <span class="c1"># add new model to locally loaded Modeloptions from modelzoo.py</span>
    <span class="n">modelzoo</span><span class="o">.</span><span class="n">Modeloptions</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="s1">&#39;PigeonSuperModel_resnet_50&#39;</span><span class="p">,</span> <span class="s1">&#39;PigeonSuperModel_resnet_101&#39;</span><span class="p">,</span> <span class="s1">&#39;PigeonSuperModel_resnet_152&#39;</span><span class="p">])</span>
    
<span class="c1"># you may need admin rights on your computer to edit the files above</span>
<span class="n">monkeypatch</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">create_dummy_videos</span><span class="p">(</span><span class="n">target_dir</span><span class="p">):</span>
    <span class="kn">import</span> <span class="nn">urllib.request</span>
    <span class="kn">import</span> <span class="nn">cv2</span>

    <span class="c1"># create dummy video</span>
    <span class="n">logolink</span> <span class="o">=</span> <span class="s1">&#39;https://gitlab.ruhr-uni-bochum.de/ikn/pigeonsupermodel/-/raw/main/PigeonSuperModel.png?inline=false&#39;</span>
    <span class="n">logo</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">target_dir</span><span class="p">,</span> <span class="s1">&#39;logo.png&#39;</span><span class="p">)</span>
    <span class="n">urllib</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">urlretrieve</span><span class="p">(</span><span class="n">logolink</span><span class="p">,</span> <span class="n">logo</span><span class="p">);</span>

    <span class="n">dummyvideo</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">target_dir</span><span class="p">,</span> <span class="s1">&#39;logo.mp4&#39;</span><span class="p">)</span>
    <span class="n">img_array</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">20</span><span class="p">):</span>
        <span class="n">img</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">imread</span><span class="p">(</span><span class="n">logo</span><span class="p">)</span>
        <span class="n">height</span><span class="p">,</span> <span class="n">width</span><span class="p">,</span> <span class="n">layers</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">shape</span>
        <span class="n">img_array</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">img</span><span class="p">)</span>
    
    <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">logo</span><span class="p">)</span>
    
    <span class="n">out</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">VideoWriter</span><span class="p">(</span><span class="n">dummyvideo</span><span class="p">,</span> <span class="n">cv2</span><span class="o">.</span><span class="n">VideoWriter_fourcc</span><span class="p">(</span><span class="o">*</span><span class="s1">&#39;mp4v&#39;</span><span class="p">),</span> <span class="mi">20</span><span class="p">,</span> <span class="p">(</span><span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">))</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">img_array</span><span class="p">)):</span>
        <span class="n">out</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">img_array</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
    <span class="n">out</span><span class="o">.</span><span class="n">release</span><span class="p">()</span>

    <span class="k">return</span> <span class="n">dummyvideo</span>

<span class="c1"># create dummy video to use copy=True</span>
<span class="n">video_path</span> <span class="o">=</span> <span class="n">create_dummy_videos</span><span class="p">(</span><span class="n">projectpath</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># create pre-trained model from PigeonSuperModel</span>
<span class="n">config_path</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">deeplabcut</span><span class="o">.</span><span class="n">create_pretrained_project</span><span class="p">(</span>
    <span class="s1">&#39;StopSignal&#39;</span><span class="p">,</span>
    <span class="s1">&#39;PigeonSuperModel&#39;</span><span class="p">,</span>
    <span class="p">[</span><span class="n">video_path</span><span class="p">],</span>
    <span class="n">videotype</span><span class="o">=</span><span class="s1">&#39;mp4&#39;</span><span class="p">,</span>
    <span class="n">copy_videos</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">working_directory</span><span class="o">=</span><span class="n">projectpath</span><span class="p">,</span>
    <span class="n">model</span><span class="o">=</span><span class="s1">&#39;PigeonSuperModel_resnet_50&#39;</span><span class="p">,</span>
    <span class="n">analyzevideo</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">filtered</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">createlabeledvideo</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="p">)</span>
    
<span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">video_path</span><span class="p">)</span>
<span class="n">sign</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;PigeonSuperModel&#39;</span><span class="p">:</span> <span class="sa">f</span><span class="s1">&#39;The pretrained PigeonSuperModel was added to this project. (C) PigeonSuperModel.com&#39;</span><span class="p">}</span>
<span class="n">deeplabcut</span><span class="o">.</span><span class="n">auxiliaryfunctions</span><span class="o">.</span><span class="n">edit_config</span><span class="p">(</span><span class="n">config_path</span><span class="p">,</span> <span class="n">sign</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Copying the videos may take very long, and creating hyperlinks does not always work on windows. Alternatively,
we can add the video paths to the <code class="docutils literal notranslate"><span class="pre">config.yaml</span></code> file while leaving our video data on a separate disk.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># patch: add video links to config.yaml</span>
<span class="k">def</span> <span class="nf">add_videopaths</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="n">video_list</span><span class="p">):</span>
    <span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>
    <span class="kn">from</span> <span class="nn">deeplabcut.utils.auxfun_videos</span> <span class="kn">import</span> <span class="n">VideoReader</span>

    <span class="n">videos</span> <span class="o">=</span> <span class="n">video_list</span>
    <span class="n">original_video_sets</span> <span class="o">=</span> <span class="n">deeplabcut</span><span class="o">.</span><span class="n">auxiliaryfunctions</span><span class="o">.</span><span class="n">read_config</span><span class="p">(</span><span class="n">config</span><span class="p">)[</span><span class="s1">&#39;video_sets&#39;</span><span class="p">]</span>
    <span class="n">projectpath</span> <span class="o">=</span> <span class="n">deeplabcut</span><span class="o">.</span><span class="n">auxiliaryfunctions</span><span class="o">.</span><span class="n">read_config</span><span class="p">(</span><span class="n">config</span><span class="p">)[</span><span class="s1">&#39;project_path&#39;</span><span class="p">]</span>
    
    <span class="c1"># create new dict for video_sets</span>
    <span class="n">video_sets</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">video</span> <span class="ow">in</span> <span class="n">videos</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Adding video: </span><span class="si">{</span><span class="n">video</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">rel_video_path</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">Path</span><span class="o">.</span><span class="n">resolve</span><span class="p">(</span><span class="n">Path</span><span class="p">(</span><span class="n">video</span><span class="p">)))</span>
            <span class="n">vid</span> <span class="o">=</span> <span class="n">VideoReader</span><span class="p">(</span><span class="n">rel_video_path</span><span class="p">)</span>
            <span class="n">video_sets</span><span class="p">[</span><span class="n">rel_video_path</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;crop&quot;</span><span class="p">:</span> <span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="n">vid</span><span class="o">.</span><span class="n">get_bbox</span><span class="p">()))}</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Could not read video, writing fake frame dimensions ...&#39;</span><span class="p">)</span>
            <span class="n">rel_video_path</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">Path</span><span class="o">.</span><span class="n">resolve</span><span class="p">(</span><span class="n">Path</span><span class="p">(</span><span class="n">video</span><span class="p">)))</span>
            <span class="n">video_sets</span><span class="p">[</span><span class="n">rel_video_path</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;crop&quot;</span><span class="p">:</span> <span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1920</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1080</span><span class="p">]))}</span> <span class="c1"># how bad is this</span>
        
        <span class="c1"># create labels directory</span>
        <span class="n">labeldir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">video</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
        
        <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">projectpath</span><span class="p">,</span><span class="s1">&#39;labeled-data&#39;</span><span class="p">,</span> <span class="n">labeldir</span><span class="p">)):</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Labels directory already exists!&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Creating directoy: </span><span class="si">{</span><span class="n">labeldir</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">os</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">projectpath</span><span class="p">,</span><span class="s1">&#39;labeled-data&#39;</span><span class="p">,</span> <span class="n">labeldir</span><span class="p">))</span>

    <span class="c1"># expand existing video_sets</span>
    <span class="k">if</span> <span class="n">original_video_sets</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">new_video_sets</span> <span class="o">=</span> <span class="n">video_sets</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">new_video_sets</span> <span class="o">=</span> <span class="p">{</span><span class="o">**</span><span class="n">original_video_sets</span><span class="p">,</span> <span class="o">**</span><span class="n">video_sets</span><span class="p">}</span>

    <span class="c1"># add videos to project</span>
    <span class="n">edit</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;video_sets&#39;</span><span class="p">:</span> <span class="n">new_video_sets</span><span class="p">}</span>
    <span class="n">deeplabcut</span><span class="o">.</span><span class="n">auxiliaryfunctions</span><span class="o">.</span><span class="n">edit_config</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="n">edit</span><span class="p">);</span>

    <span class="k">return</span>

<span class="c1"># add video paths</span>
<span class="c1">#video_list = filedialog.askopenfilenames(title = &#39;Choose video paths to include to your project&#39;)</span>
<span class="n">add_videopaths</span><span class="p">(</span><span class="n">config_path</span><span class="p">,</span> <span class="n">video_list</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Alternatively you can just load a previously created model:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># load new project (see Notebook before to create a new project)</span>
<span class="n">config</span> <span class="o">=</span> <span class="n">filedialog</span><span class="o">.</span><span class="n">askopenfilenames</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s1">&#39;Choose the config.yaml file of your DeepLabCut project:&#39;</span><span class="p">)</span>
<span class="n">config_path</span> <span class="o">=</span> <span class="n">config</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Using project path: </span><span class="si">{</span><span class="n">config_path</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="optional-create-3d-project-to-match-synchronous-frames">
<h2>Optional: Create 3D project to match synchronous frames<a class="headerlink" href="#optional-create-3d-project-to-match-synchronous-frames" title="Permalink to this headline">¶</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># create 3d config</span>
<span class="n">config_3d</span> <span class="o">=</span> <span class="n">deeplabcut</span><span class="o">.</span><span class="n">create_new_project_3d</span><span class="p">(</span><span class="s1">&#39;StopSignal&#39;</span><span class="p">,</span><span class="s1">&#39;3D&#39;</span><span class="p">,</span><span class="n">num_cameras</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span> <span class="n">working_directory</span><span class="o">=</span><span class="n">deeplabcut</span><span class="o">.</span><span class="n">auxiliaryfunctions</span><span class="o">.</span><span class="n">read_config</span><span class="p">(</span><span class="n">config_path</span><span class="p">)[</span><span class="s1">&#39;project_path&#39;</span><span class="p">])</span>

<span class="c1"># change settings</span>
<span class="n">edits</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;camera_names&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;camR&#39;</span><span class="p">,</span> <span class="s1">&#39;camL&#39;</span><span class="p">]}</span>
<span class="n">deeplabcut</span><span class="o">.</span><span class="n">auxiliaryfunctions</span><span class="o">.</span><span class="n">edit_config</span><span class="p">(</span><span class="n">config_3d</span><span class="p">,</span> <span class="n">edits</span><span class="p">);</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">config_3d</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;F:\PigeonSuperModel_local\DeepLabCutModels\StopSignal-PigeonSuperModel-2022-07-08\StopSignal-3D-2022-07-08-3d\config.yaml&#39;</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="extract-new-frames">
<h2>Extract New Frames<a class="headerlink" href="#extract-new-frames" title="Permalink to this headline">¶</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># select videos for primary camera</span>
<span class="n">video_sets</span> <span class="o">=</span> <span class="n">deeplabcut</span><span class="o">.</span><span class="n">auxiliaryfunctions</span><span class="o">.</span><span class="n">read_config</span><span class="p">(</span><span class="n">config_path</span><span class="p">)[</span><span class="s1">&#39;video_sets&#39;</span><span class="p">]</span>
<span class="n">primary_camera</span> <span class="o">=</span> <span class="n">deeplabcut</span><span class="o">.</span><span class="n">auxiliaryfunctions</span><span class="o">.</span><span class="n">read_config</span><span class="p">(</span><span class="n">config_3d</span><span class="p">)[</span><span class="s1">&#39;camera_names&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
<span class="n">videos_primary</span> <span class="o">=</span> <span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">video</span><span class="p">)</span> <span class="k">for</span> <span class="n">video</span> <span class="ow">in</span> <span class="n">video_sets</span> <span class="k">if</span> <span class="n">primary_camera</span> <span class="ow">in</span> <span class="n">video</span><span class="p">]</span>

<span class="c1"># change the number of frames to extract</span>
<span class="n">edits</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;numframes2pick&#39;</span><span class="p">:</span> <span class="mi">10</span><span class="p">}</span>

<span class="c1"># write changes to config.yaml</span>
<span class="n">deeplabcut</span><span class="o">.</span><span class="n">auxiliaryfunctions</span><span class="o">.</span><span class="n">edit_config</span><span class="p">(</span><span class="n">config_path</span><span class="p">,</span> <span class="n">edits</span><span class="p">);</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Extract frames</span>
<span class="c1"># Note: videos_list parameter is only available since dlc==2.2.1</span>
<span class="n">deeplabcut</span><span class="o">.</span><span class="n">extract_frames</span><span class="p">(</span><span class="n">config_path</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;automatic&quot;</span><span class="p">,</span> <span class="n">algo</span><span class="o">=</span><span class="s2">&quot;uniform&quot;</span><span class="p">,</span> <span class="n">userfeedback</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">videos_list</span> <span class="o">=</span> <span class="n">videos_primary</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="optional-extract-matching-frames-in-3d-projects">
<h2>Optional: Extract Matching Frames in 3D projects<a class="headerlink" href="#optional-extract-matching-frames-in-3d-projects" title="Permalink to this headline">¶</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">patch_mp4toavi</span><span class="p">(</span><span class="n">config</span><span class="p">):</span>
    <span class="kn">import</span> <span class="nn">cv2</span>
    <span class="kn">import</span> <span class="nn">shutil</span>

    <span class="c1"># get videos from config.yaml</span>
    <span class="n">video_sets</span> <span class="o">=</span> <span class="n">deeplabcut</span><span class="o">.</span><span class="n">auxiliaryfunctions</span><span class="o">.</span><span class="n">read_config</span><span class="p">(</span><span class="n">config</span><span class="p">)[</span><span class="s1">&#39;video_sets&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
    <span class="n">projectpath</span> <span class="o">=</span> <span class="n">deeplabcut</span><span class="o">.</span><span class="n">auxiliaryfunctions</span><span class="o">.</span><span class="n">read_config</span><span class="p">(</span><span class="n">config</span><span class="p">)[</span><span class="s1">&#39;project_path&#39;</span><span class="p">]</span>
    <span class="n">original_videos</span> <span class="o">=</span> <span class="p">[</span><span class="n">video</span> <span class="k">for</span> <span class="n">video</span> <span class="ow">in</span> <span class="n">video_sets</span><span class="p">]</span>
    <span class="c1"># patch videos for matched frame extraction se here: https://github.com/DeepLabCut/DeepLabCut/issues/1211#issuecomment-1177537516</span>
    <span class="n">patched_videos</span> <span class="o">=</span> <span class="p">[</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">projectpath</span><span class="p">,</span> <span class="s1">&#39;videos&#39;</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">video</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;.avi&#39;</span><span class="p">)</span> <span class="k">for</span> <span class="n">video</span> <span class="ow">in</span> <span class="n">original_videos</span><span class="p">]</span>
    <span class="c1"># change video extension and move</span>
    <span class="k">for</span> <span class="n">old</span><span class="p">,</span> <span class="n">new</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">original_videos</span><span class="p">,</span> <span class="n">patched_videos</span><span class="p">):</span>
        <span class="c1"># test and close videos</span>
        <span class="n">cap</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">VideoCapture</span><span class="p">(</span><span class="n">video</span><span class="p">)</span>
        <span class="k">while</span><span class="p">(</span><span class="n">cap</span><span class="o">.</span><span class="n">isOpened</span><span class="p">()):</span>
            <span class="c1"># read first frame</span>
            <span class="n">cap</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>       
            <span class="c1"># break after first frame</span>
            <span class="k">break</span>
        <span class="n">cap</span><span class="o">.</span><span class="n">release</span><span class="p">()</span>
        <span class="c1"># Closes all the frames</span>
        <span class="n">cv2</span><span class="o">.</span><span class="n">destroyAllWindows</span><span class="p">()</span> 
        <span class="c1"># rename</span>
        <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">new</span><span class="p">):</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;File </span><span class="si">{</span><span class="n">new</span><span class="si">}</span><span class="s1"> already exists&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">shutil</span><span class="o">.</span><span class="n">move</span><span class="p">(</span><span class="n">old</span><span class="p">,</span> <span class="n">new</span><span class="p">)</span>
            <span class="c1">#os.rename(old, new)</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Video: </span><span class="si">{</span><span class="n">old</span><span class="si">}</span><span class="s1"> changed to </span><span class="si">{</span><span class="n">new</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
    
    <span class="k">return</span> <span class="n">original_videos</span><span class="p">,</span> <span class="n">patched_videos</span>
    
<span class="k">def</span> <span class="nf">patch_reverse_mp4toavi</span><span class="p">(</span><span class="n">original_videos</span><span class="p">,</span> <span class="n">patched_videos</span><span class="p">):</span>
    <span class="kn">import</span> <span class="nn">shutil</span>
    <span class="k">for</span> <span class="n">old</span><span class="p">,</span> <span class="n">new</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">original_videos</span><span class="p">,</span> <span class="n">patched_videos</span><span class="p">):</span>
        <span class="c1"># reverse video patch to original</span>
        <span class="n">shutil</span><span class="o">.</span><span class="n">move</span><span class="p">(</span><span class="n">new</span><span class="p">,</span> <span class="n">old</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Video: </span><span class="si">{</span><span class="n">new</span><span class="si">}</span><span class="s1"> reversed to </span><span class="si">{</span><span class="n">old</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
    
    <span class="k">return</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># patch videos for matched frames see here: https://github.com/DeepLabCut/DeepLabCut/issues/1211#issuecomment-1177537516</span>
<span class="n">original_videos</span><span class="p">,</span> <span class="n">patched_videos</span> <span class="o">=</span> <span class="n">patch_mp4toavi</span><span class="p">(</span><span class="n">config_path</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Overwrite matched synchronous frames with mode=&quot;match&quot; and config3d file</span>
<span class="n">deeplabcut</span><span class="o">.</span><span class="n">extract_frames</span><span class="p">(</span><span class="n">config_path</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;match&quot;</span><span class="p">,</span> <span class="n">config3d</span><span class="o">=</span><span class="n">config_3d</span><span class="p">,</span> <span class="n">extracted_cam</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">userfeedback</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># reverse patched videos</span>
<span class="n">patch_reverse_mp4toavi</span><span class="p">(</span><span class="n">original_videos</span><span class="p">,</span> <span class="n">patched_videos</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="label-your-own-data-first">
<h2>Label your own Data first<a class="headerlink" href="#label-your-own-data-first" title="Permalink to this headline">¶</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># manually label frames</span>
<span class="n">deeplabcut</span><span class="o">.</span><span class="n">label_frames</span><span class="p">(</span><span class="n">config_path</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># check labels</span>
<span class="n">deeplabcut</span><span class="o">.</span><span class="n">check_labels</span><span class="p">(</span><span class="n">config_path</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="merge-the-pigeonsupermodel-dataset">
<h2>Merge the PigeonSuperModel DataSet<a class="headerlink" href="#merge-the-pigeonsupermodel-dataset" title="Permalink to this headline">¶</a></h2>
<p>How to use the PigeonSuperModel Dataset. Once you have your own DeepLabCut project for single Pigeon tracking, why not spiking your dataset with an extra 1000 pre-labeled frames? The cells below will guide you through this process.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># make a single function</span>
<span class="k">def</span> <span class="nf">merge_psm_dataset</span><span class="p">(</span><span class="n">config</span><span class="p">):</span>

    <span class="kn">import</span> <span class="nn">urllib.request</span>
    <span class="kn">import</span> <span class="nn">tarfile</span>
    <span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
    <span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>
    
    <span class="c1"># read config.yaml</span>
    <span class="n">target_dir</span> <span class="o">=</span> <span class="n">deeplabcut</span><span class="o">.</span><span class="n">auxiliaryfunctions</span><span class="o">.</span><span class="n">read_config</span><span class="p">(</span><span class="n">config</span><span class="p">)[</span><span class="s1">&#39;project_path&#39;</span><span class="p">]</span>
    <span class="n">scorer</span> <span class="o">=</span> <span class="n">deeplabcut</span><span class="o">.</span><span class="n">auxiliaryfunctions</span><span class="o">.</span><span class="n">read_config</span><span class="p">(</span><span class="n">config</span><span class="p">)[</span><span class="s1">&#39;scorer&#39;</span><span class="p">]</span>
    <span class="n">original_video_sets</span> <span class="o">=</span> <span class="n">deeplabcut</span><span class="o">.</span><span class="n">auxiliaryfunctions</span><span class="o">.</span><span class="n">read_config</span><span class="p">(</span><span class="n">config</span><span class="p">)[</span><span class="s1">&#39;video_sets&#39;</span><span class="p">]</span>

    <span class="c1"># download</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Downloading DataSet from: gitlab.ruhr-uni-bochum.de/ikn/pigeonsupermodel ...&#39;</span><span class="p">)</span>
    <span class="n">dataset_url</span> <span class="o">=</span> <span class="s1">&#39;https://gitlab.ruhr-uni-bochum.de/ikn/pigeonsupermodel/-/archive/main/pigeonsupermodel-main.tar.gz?path=dataset/DeepLabCut/labeled-data&#39;</span>
    <span class="n">filename</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">urllib</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">urlretrieve</span><span class="p">(</span><span class="n">dataset_url</span><span class="p">)</span>
    <span class="n">statement</span> <span class="o">=</span> <span class="s1">&#39;The PigeonSuperModel Dataset was added to this project to increase the number of labeled frames. (C) PigeonSuperModel.com&#39;</span>
    <span class="c1"># Extract .tar</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Extracting tar file to: </span><span class="si">{</span><span class="n">target_dir</span><span class="si">}</span><span class="s1"> ...&#39;</span><span class="p">)</span>
    <span class="k">with</span> <span class="n">tarfile</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;r:gz&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">tar</span><span class="p">:</span>
        <span class="n">tar</span><span class="o">.</span><span class="n">extractall</span><span class="p">(</span><span class="n">target_dir</span><span class="p">)</span>

    <span class="n">dataset_path</span> <span class="o">=</span> <span class="p">[</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">target_dir</span><span class="p">,</span> <span class="n">path</span><span class="p">)</span> <span class="k">for</span> <span class="n">path</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">target_dir</span><span class="p">)</span> <span class="k">if</span> <span class="s1">&#39;pigeonsupermodel&#39;</span> <span class="ow">in</span> <span class="n">path</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>

    <span class="c1"># scrap pre-labeled dataset</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Merging Dataset to: </span><span class="si">{</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">target_dir</span><span class="p">,</span> <span class="s2">&quot;labeled-data&quot;</span><span class="p">)</span><span class="si">}</span><span class="s1"> ...&#39;</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">root</span><span class="p">,</span> <span class="n">dirs</span><span class="p">,</span> <span class="n">files</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">walk</span><span class="p">(</span><span class="n">dataset_path</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">files</span><span class="p">:</span>
            <span class="k">if</span> <span class="s1">&#39;.h5&#39;</span> <span class="ow">in</span> <span class="n">f</span><span class="p">:</span>
                <span class="n">h5file</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">f</span><span class="p">)</span>
                <span class="c1"># rename scorer in .h5</span>
                <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_hdf</span><span class="p">(</span><span class="n">h5file</span><span class="p">)</span>
                <span class="n">df</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">set_levels</span><span class="p">([</span><span class="n">scorer</span><span class="p">],</span> <span class="n">level</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
                
                <span class="c1"># rename .h5 file</span>
                <span class="n">rename</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="sa">f</span><span class="s1">&#39;CollectedData_</span><span class="si">{</span><span class="n">scorer</span><span class="si">}</span><span class="s1">.h5&#39;</span><span class="p">)</span>
                <span class="n">df</span><span class="o">.</span><span class="n">to_hdf</span><span class="p">(</span><span class="n">rename</span><span class="p">,</span> <span class="n">key</span> <span class="o">=</span> <span class="s2">&quot;df_with_missing&quot;</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;w&quot;</span><span class="p">)</span>

                <span class="c1"># move frame set to labeled-data</span>
                <span class="n">src</span> <span class="o">=</span> <span class="n">root</span>
                <span class="n">dst</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">target_dir</span><span class="p">,</span> <span class="s1">&#39;labeled-data&#39;</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">root</span><span class="p">))</span>
                <span class="n">os</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">src</span><span class="p">,</span> <span class="n">dst</span><span class="p">)</span>

    <span class="c1"># add dummy videopaths to config.yaml files</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Adding video paths to &quot;video_sets&quot; in config.yaml ...&#39;</span><span class="p">)</span>
    <span class="n">framesets</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">target_dir</span><span class="p">,</span> <span class="s1">&#39;labeled-data&#39;</span><span class="p">))</span>
    <span class="n">videos</span> <span class="o">=</span> <span class="p">[</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">target_dir</span><span class="p">,</span> <span class="s1">&#39;videos&#39;</span><span class="p">,</span><span class="n">frameset</span><span class="o">+</span><span class="s1">&#39;.avi&#39;</span><span class="p">)</span> <span class="k">for</span> <span class="n">frameset</span> <span class="ow">in</span> <span class="n">framesets</span><span class="p">]</span>

    <span class="c1"># create new dict for video_sets</span>
    <span class="n">video_sets</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">video</span> <span class="ow">in</span> <span class="n">videos</span><span class="p">:</span>
        <span class="n">rel_video_path</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">Path</span><span class="o">.</span><span class="n">resolve</span><span class="p">(</span><span class="n">Path</span><span class="p">(</span><span class="n">video</span><span class="p">)))</span>
        <span class="n">video_sets</span><span class="p">[</span><span class="n">rel_video_path</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;crop&quot;</span><span class="p">:</span> <span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1920</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1080</span><span class="p">]))}</span> <span class="c1"># how bad is this?</span>
            
    <span class="c1"># expand existing video_sets</span>
    <span class="k">if</span> <span class="n">original_video_sets</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">new_video_sets</span> <span class="o">=</span> <span class="n">video_sets</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">new_video_sets</span> <span class="o">=</span> <span class="p">{</span><span class="o">**</span><span class="n">original_video_sets</span><span class="p">,</span> <span class="o">**</span><span class="n">video_sets</span><span class="p">}</span>

    <span class="c1"># add video paths to project</span>
    <span class="n">edit</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;video_sets&#39;</span><span class="p">:</span> <span class="n">new_video_sets</span><span class="p">,</span> 
            <span class="s1">&#39;PigeonSuperModel_data&#39;</span><span class="p">:</span> <span class="n">statement</span><span class="p">}</span>
    <span class="n">deeplabcut</span><span class="o">.</span><span class="n">auxiliaryfunctions</span><span class="o">.</span><span class="n">edit_config</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="n">edit</span><span class="p">);</span>

    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;The PigeonSuperModel Dataset has been successfully merged to your project! Enjoy&#39;</span><span class="p">)</span>

    <span class="k">return</span> 
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">merge_psm_dataset</span><span class="p">(</span><span class="n">config_path</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Now you are ready to create a training dataset and train your own model</p>
</div>
<div class="section" id="re-train-the-pigeonsupermodel">
<h2>Re-Train the PigeonSuperModel<a class="headerlink" href="#re-train-the-pigeonsupermodel" title="Permalink to this headline">¶</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># create training set</span>
<span class="n">deeplabcut</span><span class="o">.</span><span class="n">create_training_dataset</span><span class="p">(</span><span class="n">config_path</span><span class="p">,</span> <span class="n">num_shuffles</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">net_type</span><span class="o">=</span><span class="s1">&#39;resnet_50&#39;</span><span class="p">,</span> <span class="n">augmenter_type</span><span class="o">=</span><span class="s1">&#39;imgaug&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># find pose_cfg.yaml</span>
<span class="k">for</span> <span class="n">root</span><span class="p">,</span> <span class="n">dirs</span><span class="p">,</span> <span class="n">files</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">walk</span><span class="p">(</span><span class="n">deeplabcut</span><span class="o">.</span><span class="n">auxiliaryfunctions</span><span class="o">.</span><span class="n">read_config</span><span class="p">(</span><span class="n">config</span><span class="p">)[</span><span class="s1">&#39;project_path&#39;</span><span class="p">]):</span>
    <span class="k">for</span> <span class="n">file</span> <span class="ow">in</span> <span class="n">files</span><span class="p">:</span>
        <span class="k">if</span> <span class="s1">&#39;pose_cfg.yaml&#39;</span> <span class="ow">in</span> <span class="n">file</span><span class="p">:</span>
            <span class="n">pose_cfg</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">file</span><span class="p">)</span>
<span class="n">pose_cfg</span>

<span class="c1"># edit relevant training parameters</span>
<span class="n">edits</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;multi_step&#39;</span><span class="p">:</span> <span class="p">[[</span><span class="mf">0.005</span><span class="p">,</span> <span class="mi">10000</span><span class="p">],</span> <span class="p">[</span><span class="mf">0.02</span><span class="p">,</span> <span class="mi">430000</span><span class="p">],</span> <span class="p">[</span><span class="mf">0.002</span><span class="p">,</span> <span class="mi">730000</span><span class="p">],</span> <span class="p">[</span><span class="mf">0.001</span><span class="p">,</span> <span class="mi">1030000</span><span class="p">]],</span> <span class="c1"># change this to train over 1M iterations</span>
        <span class="s1">&#39;init_weights&#39;</span><span class="p">:</span> <span class="n">path_to_lastsnapshot</span><span class="p">,</span> <span class="c1"># change this to use pre-trained model</span>
        <span class="s1">&#39;max_input_size&#39;</span><span class="p">:</span> <span class="mi">2000</span><span class="p">,</span> <span class="c1"># change this to largest frame dimension in dataset</span>
        <span class="s1">&#39;global_scale&#39;</span><span class="p">:</span> <span class="mf">0.4</span><span class="p">,</span> <span class="c1"># change this to rescale frames to reduce GPU load</span>
        <span class="p">}</span>
<span class="n">deeplabcut</span><span class="o">.</span><span class="n">auxiliaryfunctions</span><span class="o">.</span><span class="n">edit_config</span><span class="p">(</span><span class="n">pose_cfg</span><span class="p">,</span> <span class="n">edits</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># train</span>
<span class="n">deeplabcut</span><span class="o">.</span><span class="n">train_network</span><span class="p">(</span><span class="n">config_path</span><span class="p">,</span> <span class="n">max_snapshots_to_keep</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">displayiters</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span> <span class="n">saveiters</span><span class="o">=</span><span class="mi">10000</span><span class="p">,</span> <span class="n">maxiters</span><span class="o">=</span><span class="mi">1000000</span><span class="p">,</span> <span class="n">allow_growth</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="evaluate-your-new-pigeonsupermodel">
<h2>Evaluate your new PigeonSuperModel<a class="headerlink" href="#evaluate-your-new-pigeonsupermodel" title="Permalink to this headline">¶</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># change config.yaml file to evaluate all snapshots</span>
<span class="n">edits</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;snapshotindex&#39;</span><span class="p">:</span> <span class="s1">&#39;all&#39;</span><span class="p">}</span>
<span class="n">deeplabcut</span><span class="o">.</span><span class="n">auxiliaryfunctions</span><span class="o">.</span><span class="n">edit_config</span><span class="p">(</span><span class="n">config_path</span><span class="p">,</span> <span class="n">edits</span><span class="p">)</span>

<span class="c1"># evaluate snapshots</span>
<span class="n">deeplabcut</span><span class="o">.</span><span class="n">evaluate_network</span><span class="p">(</span><span class="n">config_path</span><span class="p">,</span> <span class="n">plotting</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">check_evaluation_results</span><span class="p">(</span><span class="n">config</span><span class="p">):</span>
    <span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
    <span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
    <span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>

    <span class="c1"># read config</span>
    <span class="n">config</span> <span class="o">=</span> <span class="n">deeplabcut</span><span class="o">.</span><span class="n">auxiliaryfunctions</span><span class="o">.</span><span class="n">read_config</span><span class="p">(</span><span class="n">config</span><span class="p">)</span>
    <span class="n">projectpath</span> <span class="o">=</span> <span class="n">config</span><span class="p">[</span><span class="s1">&#39;project_path&#39;</span><span class="p">]</span>
    <span class="n">iteration</span> <span class="o">=</span> <span class="n">config</span><span class="p">[</span><span class="s1">&#39;iteration&#39;</span><span class="p">]</span>
    <span class="n">modelname</span> <span class="o">=</span> <span class="n">config</span><span class="p">[</span><span class="s1">&#39;Task&#39;</span><span class="p">]</span>
    <span class="n">pcutoff</span> <span class="o">=</span> <span class="n">config</span><span class="p">[</span><span class="s1">&#39;pcutoff&#39;</span><span class="p">]</span>
    <span class="n">videores</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;video_sets&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">items</span><span class="p">())[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">][</span><span class="s1">&#39;crop&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)[</span><span class="mi">1</span><span class="p">:</span><span class="mi">4</span><span class="p">:</span><span class="mi">2</span><span class="p">]</span>
    
    <span class="c1"># read evaluation results</span>
    <span class="n">evals</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">projectpath</span><span class="p">,</span> <span class="s1">&#39;evaluation-results&#39;</span><span class="p">,</span> <span class="sa">f</span><span class="s1">&#39;iteration-</span><span class="si">{</span><span class="n">iteration</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">,</span> <span class="s1">&#39;CombinedEvaluation-results.csv&#39;</span><span class="p">)</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">evals</span><span class="p">)</span>
    <span class="n">evaluation_results</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="o">~</span><span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">isin</span><span class="p">([</span><span class="s1">&#39;Unnamed: 0&#39;</span><span class="p">,</span> <span class="s1">&#39;%Training dataset&#39;</span><span class="p">,</span> <span class="s1">&#39;Shuffle number&#39;</span><span class="p">,</span> <span class="s1">&#39;p-cutoff used&#39;</span><span class="p">])]</span>
    <span class="n">evaluation_results</span>

    <span class="c1"># plot evaluation results</span>
    <span class="n">evaluation_results</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">line</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="s1">&#39;Training iterations:&#39;</span><span class="p">,</span> 
                <span class="n">title</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Evaluation results of DLC Model </span><span class="si">{</span><span class="n">modelname</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> 
                <span class="n">ylabel</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Pixel Error in </span><span class="si">{</span><span class="n">videores</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="n">videores</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s2"> resolution frames&quot;</span><span class="p">,</span>
                <span class="n">xlabel</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Training Iterations in DLC [p-cutoff = </span><span class="si">{</span><span class="n">pcutoff</span><span class="si">}</span><span class="s2">]&quot;</span><span class="p">,</span>
                <span class="n">xticks</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1000001</span><span class="p">,</span> <span class="mi">40000</span><span class="p">),</span>
                <span class="n">rot</span> <span class="o">=</span> <span class="mi">45</span><span class="p">,</span> <span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">15</span><span class="p">,</span><span class="mi">10</span><span class="p">))</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">ticklabel_format</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s1">&#39;both&#39;</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="s1">&#39;plain&#39;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

    <span class="c1"># check evaluation results</span>
    <span class="k">return</span> <span class="n">evaluation_results</span>

<span class="c1"># show evaluation results</span>
<span class="n">check_evaluation_results</span><span class="p">(</span><span class="n">config_path</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># export model</span>
<span class="n">deeplabcut</span><span class="o">.</span><span class="n">export_model</span><span class="p">(</span><span class="n">config_path</span><span class="p">,</span> <span class="n">shuffle</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">iteration</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">snapshotindex</span><span class="o">=-</span><span class="mi">1</span><span class="p">,</span> <span class="n">make_tar</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">modelprefix</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="contribute-to-pigeonsupermodel-com">
<h2>Contribute to <a class="reference external" href="http://PigeonSuperModel.com">PigeonSuperModel.com</a><a class="headerlink" href="#contribute-to-pigeonsupermodel-com" title="Permalink to this headline">¶</a></h2>
<p>Do you have an improved version of the PigeonSuperModel?</p>
<p>Share your labeled data and your new trained model with us to contribute to the <a class="reference external" href="http://PigeonSuperModel.com">PigeonSuperModel.com</a>.</p>
<p>Get in touch at <a class="reference external" href="mailto:Guillermo&#46;HidalgoGadea&#37;&#52;&#48;ruhr-uni-bochum&#46;de">Guillermo<span>&#46;</span>HidalgoGadea<span>&#64;</span>ruhr-uni-bochum<span>&#46;</span>de</a> or at <a class="reference external" href="http://GuillermoHidalgoGadea.com">GuillermoHidalgoGadea.com</a></p>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
            
                <!-- Previous / next buttons -->
<div class='prev-next-area'>
</div>
            
        </div>
    </div>
    <footer class="footer">
  <p>
    
      By Guillermo Hidalgo Gadea & Sarah C. Möser, IKN, Ruhr-University Bochum<br/>
    
        &copy; Copyright 2023.<br/>
  </p>
</footer>
</main>


      </div>
    </div>
  
  <script src="_static/js/index.be7d3bbb2ef33a8344ce.js"></script>

  </body>
</html>